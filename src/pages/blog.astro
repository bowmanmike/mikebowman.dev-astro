---
import BaseLayout from "../layouts/Base.astro";
import BlogIndex from "../components/BlogIndex.astro";
import { getSortedPosts, SortDirection } from "../utils/blog.ts";

// Pagination settings
const postsPerPage = 10;
const allPosts = await getSortedPosts(SortDirection.NEWEST_FIRST);
const totalPages = Math.ceil(allPosts.length / postsPerPage);

// First page of posts
const currentPage = 1;
const startIndex = (currentPage - 1) * postsPerPage;
const endIndex = startIndex + postsPerPage;
const paginatedPosts = allPosts.slice(startIndex, endIndex);
---

<BaseLayout>
  <BlogIndex 
    currentPage={currentPage}
    totalPages={totalPages}
    posts={paginatedPosts}
  />
</BaseLayout>
